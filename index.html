<!DOCTYPE html>
<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-72DE9EZ4TD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-72DE9EZ4TD');
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <title>Contribution Margin Calculator</title>
</head>

<body class="bg-gray-50 font-sans">
    <div id="calculator-container" class="flex flex-wrap p-8">
        <div id="parameters-container" class="bg-white p-6 rounded-lg shadow-lg mb-8 flex-1">
            <h1 class="text-2xl font-semibold mb-4">Contribution Margin Calculator for Online Retailers</h1>
            <form id="calculator-form" class="space-y-4">
                <!-- Form Fields -->
                <div>
                    <label for="average_order_value" class="block text-sm font-bold mb-2">Average Order Value ($):</label>
                    <input type="number" id="average_order_value" name="average_order_value" value="100" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="COGS" class="block text-sm font-bold mb-2">Cost of Goods Sold ($):</label>
                    <input type="number" id="COGS" name="COGS" value="20" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="shipping_costs" class="block text-sm font-bold mb-2">Shipping Costs ($):</label>
                    <input type="number" id="shipping_costs" name="shipping_costs" value="10" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="package_materials" class="block text-sm font-bold mb-2">Package Materials ($):</label>
                    <input type="number" id="package_materials" name="package_materials" value="2" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="picking_handling" class="block text-sm font-bold mb-2">Picking/Handling ($):</label>
                    <input type="number" id="picking_handling" name="picking_handling" value="2" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="payment_fees_percent" class="block text-sm font-bold mb-2">Payment Fees (%):</label>
                    <input type="number" id="payment_fees_percent" name="payment_fees_percent" value="2" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="payment_fees_per_order" class="block text-sm font-bold mb-2">Payment Fees Per Order ($):</label>
                    <input type="number" id="payment_fees_per_order" name="payment_fees_per_order" value="0.3" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="ecommerce_platform_fee_percent" class="block text-sm font-bold mb-2">eCommerce Platform Fee (%):</label>
                    <input type="number" id="ecommerce_platform_fee_percent" name="ecommerce_platform_fee_percent" value="1.5" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="ecommerce_platform_fee_per_order" class="block text-sm font-bold mb-2">eCommerce Platform Fee Per Order ($):</label>
                    <input type="number" id="ecommerce_platform_fee_per_order" name="ecommerce_platform_fee_per_order" value="0" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="returns_percent" class="block text-sm font-bold mb-2">Returns (%):</label>
                    <input type="number" id="returns_percent" name="returns_percent" value="3" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="promotions_percent" class="block text-sm font-bold mb-2">Promotions (%):</label>
                    <input type="number" id="promotions_percent" name="promotions_percent" value="10" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="advertising_percent" class="block text-sm font-bold mb-2">Advertising (%):</label>
                    <input type="number" id="advertising_percent" name="advertising_percent" value="30" class="w-full p-2 border rounded-lg">
                </div>

                <div>
                    <label for="other_costs" class="block text-sm font-bold mb-2">Other Costs ($):</label>
                    <input type="number" id="other_costs" name="other_costs" value="2" class="w-full p-2 border rounded-lg">
                </div>

                <input type="button" value="Calculate" onclick="calculateCM()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-400 cursor-pointer mt-4">

                <h3 class="mt-6">Interim parameters</h3>
                <p>Total Payment Cost: <span id="total_payment_cost"></span></p>
                <p>Total eCommerce Platform Cost: <span id="total_ecommerce_platform_cost"></span></p>
                <p>Total Variable Costs: <span id="total_variable_costs"></span></p>
            </form>

            <h2 class="mt-6">Final results:</h2>
            <p>Contribution Margin: <span id="contribution_margin"></span></p>
            <p>Contribution Margin Ratio: <span id="contribution_margin_ratio"></span>%</p>
        </div>
         <div id="chart-container" class="bg-white p-6 rounded-lg shadow-lg flex-1">
            <h3>Order structure chart</h3>
            <canvas id="contributionMarginChart" width="400" height="200"></canvas>
        </div>
    </div>

    <script src="script.js"></script>
    <footer class="mt-8 text-center">
        <p>&copy; Alex Levashov, 2023, <a href="http://www.levashov.biz" target="_blank" class="text-blue-500 hover:text-blue-400">www.levashov.biz</a></p>
    </footer>

</body>
</html>
<style>
  @media (max-width: 768px) {
    #calculator-container {
      flex-direction: column;
    }
    #parameters-container,
    #chart-container {
      flex: 1 0 100%;  /* Take full width in mobile view */
    }
  }
</style>
